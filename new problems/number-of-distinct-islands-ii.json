{
    "problems": [
        {
            "id": null,
            "title": "Number of Distinct Islands II (Union Find)",
            "description": "You are given an m x n binary matrix grid. An island is a group of 1's (representing land) connected 4-directionally (horizontal or vertical). You may assume all four edges of the grid are surrounded by water.\n\nAn island is considered to be the same as another if they have the same shape, or have the same shape after rotation (90, 180, or 270 degrees only) or reflection (left/right direction or up/down direction).\n\nReturn the number of distinct islands.\n\nInput Format:\nFirst line contains two integers m and n (rows and columns).\nNext m lines contain n space-separated integers (0 or 1) representing the grid.\n\nOutput Format:\nPrint a single integer representing the number of distinct islands.",
            "examples": "Sample Input 1\n4 5\n1 1 0 0 0\n1 0 0 0 0\n0 0 0 0 1\n0 0 0 1 1\n\nSample Output 1\n1\n\nExplanation:\nThe two islands are considered the same because if we make a 180 degrees clockwise rotation on the first island, then two islands will have the same shapes.\n\nSample Input 2\n4 5\n1 1 0 0 0\n1 1 0 0 0\n0 0 0 1 1\n0 0 0 1 1\n\nSample Output 2\n1\n\nExplanation:\nBoth islands are 2x2 squares, so they are the same shape.",
            "constraints": "1 <= m, n <= 50\ngrid[i][j] is either 0 or 1",
            "hints": 3,
            "timeLimit": 2,
            "memoryLimit": 256,
            "subdomainId": 7035,
            "difficulty": 3,
            "testCases": [
                {
                    "input": "4 5\n1 1 0 0 0\n1 0 0 0 0\n0 0 0 0 1\n0 0 0 1 1",
                    "expectedOutput": "1"
                },
                {
                    "input": "4 5\n1 1 0 0 0\n1 1 0 0 0\n0 0 0 1 1\n0 0 0 1 1",
                    "expectedOutput": "1"
                },
                {
                    "input": "1 1\n0",
                    "expectedOutput": "0"
                },
                {
                    "input": "1 1\n1",
                    "expectedOutput": "1"
                },
                {
                    "input": "3 4\n1 1 0 0\n0 1 1 0\n0 0 1 1",
                    "expectedOutput": "1"
                }
            ],
            "starterCodes": [
                {
                    "language": 1,
                    "code": "class Solution:\n    def numDistinctIslands2(self, grid):\n        # TODO: Count the number of distinct islands considering rotations and reflections\n        # Generate all 8 transformations (4 rotations + 4 reflections) for each island\n        # Use canonical form (lexicographically smallest) to identify unique shapes\n        return 0\n\nif __name__ == '__main__':\n    m, n = map(int, input().split())\n    grid = []\n    for i in range(m):\n        row = list(map(int, input().split()))\n        grid.append(row)\n    \n    sol = Solution()\n    print(sol.numDistinctIslands2(grid))"
                },
                {
                    "language": 2,
                    "code": "import java.io.*;\nimport java.util.*;\n\nclass Solution {\n    public int numDistinctIslands2(int[][] grid) {\n        // TODO: Count the number of distinct islands considering rotations and reflections\n        // Generate all 8 transformations (4 rotations + 4 reflections) for each island\n        // Use canonical form (lexicographically smallest) to identify unique shapes\n        return 0;\n    }\n    \n    public static void main(String[] args) throws Exception {\n        Scanner sc = new Scanner(System.in);\n        int m = sc.nextInt();\n        int n = sc.nextInt();\n        \n        int[][] grid = new int[m][n];\n        for (int i = 0; i < m; i++) {\n            for (int j = 0; j < n; j++) {\n                grid[i][j] = sc.nextInt();\n            }\n        }\n        \n        Solution sol = new Solution();\n        System.out.println(sol.numDistinctIslands2(grid));\n    }\n}"
                },
                {
                    "language": 3,
                    "code": "class Solution {\n    numDistinctIslands2(grid) {\n        // TODO: Count the number of distinct islands considering rotations and reflections\n        // Generate all 8 transformations (4 rotations + 4 reflections) for each island\n        // Use canonical form (lexicographically smallest) to identify unique shapes\n        return 0;\n    }\n}\n\nfunction solveProblem(input) {\n    const lines = input.trim().split('\\n');\n    const [m, n] = lines[0].split(' ').map(Number);\n    \n    const grid = [];\n    for (let i = 1; i <= m; i++) {\n        grid.push(lines[i].split(' ').map(Number));\n    }\n    \n    const sol = new Solution();\n    console.log(sol.numDistinctIslands2(grid));\n}\n\nconst fs = require('fs');\nsolveProblem(fs.readFileSync(0, 'utf-8'));"
                },
                {
                    "language": 4,
                    "code": "#include <bits/stdc++.h>\nusing namespace std;\n\nclass Solution {\npublic:\n    int numDistinctIslands2(vector<vector<int>>& grid) {\n        // TODO: Count the number of distinct islands considering rotations and reflections\n        // Generate all 8 transformations (4 rotations + 4 reflections) for each island\n        // Use canonical form (lexicographically smallest) to identify unique shapes\n        return 0;\n    }\n};\n\nint main() {\n    int m, n;\n    cin >> m >> n;\n    \n    vector<vector<int>> grid(m, vector<int>(n));\n    for (int i = 0; i < m; i++) {\n        for (int j = 0; j < n; j++) {\n            cin >> grid[i][j];\n        }\n    }\n    \n    Solution sol;\n    cout << sol.numDistinctIslands2(grid) << endl;\n    \n    return 0;\n}"
                },
                {
                    "language": 5,
                    "code": "#include <stdio.h>\n#include <stdlib.h>\n\nint numDistinctIslands2(int** grid, int m, int n) {\n    // TODO: Count the number of distinct islands considering rotations and reflections\n    // Generate all 8 transformations (4 rotations + 4 reflections) for each island\n    // Use canonical form (lexicographically smallest) to identify unique shapes\n    return 0;\n}\n\nint main() {\n    int m, n;\n    scanf(\"%d %d\", &m, &n);\n    \n    int** grid = (int**)malloc(m * sizeof(int*));\n    for (int i = 0; i < m; i++) {\n        grid[i] = (int*)malloc(n * sizeof(int));\n        for (int j = 0; j < n; j++) {\n            scanf(\"%d\", &grid[i][j]);\n        }\n    }\n    \n    printf(\"%d\\n\", numDistinctIslands2(grid, m, n));\n    \n    for (int i = 0; i < m; i++) {\n        free(grid[i]);\n    }\n    free(grid);\n    \n    return 0;\n}"
                }
            ],
            "hintsList": [
                "For each island, generate all 8 possible transformations: 4 rotations (0째, 90째, 180째, 270째) and their reflections.",
                "Normalize each island shape by converting coordinates to relative positions and sorting them to get a canonical form.",
                "Use the lexicographically smallest transformation as the canonical representation and store it in a Set to count distinct islands."
            ]
        }
    ]
}
